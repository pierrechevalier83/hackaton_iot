'use strict';

var WebSocketServer = require('ws').Server,
    wss = new WebSocketServer({ port: 8990 });

console.log('Listening on port 8990!');
var clients = [];

function broadcast(data, from) {
  clients.filter(function (client) {
    return client !== from;
  }).forEach(function (client) {
    return client.send(data);
  });
};

wss.on('connection', function connection(ws) {
  clients.push(ws);

  ws.on('message', function incoming(message) {
    console.log('received: %s', message, ws);
    broadcast(message, ws);
  });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zZXJ2ZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLGtCQUFrQixRQUFRLElBQVIsRUFBYyxNQUFwQztJQUNJLE1BQU0sSUFBSSxlQUFKLENBQW9CLEVBQUUsTUFBTSxJQUFSLEVBQXBCLENBRFY7O0FBR0EsUUFBUSxHQUFSLENBQVkseUJBQVo7QUFDQSxJQUFJLFVBQVUsRUFBZDs7QUFFQSxTQUFTLFNBQVQsQ0FBbUIsSUFBbkIsRUFBeUIsSUFBekIsRUFBOEI7QUFDNUIsVUFDRyxNQURILENBQ1U7QUFBQSxXQUFVLFdBQVcsSUFBckI7QUFBQSxHQURWLEVBRUcsT0FGSCxDQUVXO0FBQUEsV0FBVSxPQUFPLElBQVAsQ0FBWSxJQUFaLENBQVY7QUFBQSxHQUZYO0FBR0Q7O0FBRUQsSUFBSSxFQUFKLENBQU8sWUFBUCxFQUFxQixTQUFTLFVBQVQsQ0FBb0IsRUFBcEIsRUFBd0I7QUFDM0MsVUFBUSxJQUFSLENBQWEsRUFBYjs7QUFFQSxLQUFHLEVBQUgsQ0FBTSxTQUFOLEVBQWlCLFNBQVMsUUFBVCxDQUFrQixPQUFsQixFQUEyQjtBQUMxQyxZQUFRLEdBQVIsQ0FBWSxjQUFaLEVBQTRCLE9BQTVCLEVBQXFDLEVBQXJDO0FBQ0EsY0FBVSxPQUFWLEVBQW1CLEVBQW5CO0FBQ0QsR0FIRDtBQUlELENBUEQiLCJmaWxlIjoic2VydmVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIFdlYlNvY2tldFNlcnZlciA9IHJlcXVpcmUoJ3dzJykuU2VydmVyLFxuICAgIHdzcyA9IG5ldyBXZWJTb2NrZXRTZXJ2ZXIoeyBwb3J0OiA4OTkwIH0pO1xuXG5jb25zb2xlLmxvZygnTGlzdGVuaW5nIG9uIHBvcnQgODk5MCEnKTtcbnZhciBjbGllbnRzID0gW107XG5cbmZ1bmN0aW9uIGJyb2FkY2FzdChkYXRhLCBmcm9tKXtcbiAgY2xpZW50c1xuICAgIC5maWx0ZXIoY2xpZW50ID0+IGNsaWVudCAhPT0gZnJvbSlcbiAgICAuZm9yRWFjaChjbGllbnQgPT4gY2xpZW50LnNlbmQoZGF0YSkpO1xufTtcblxud3NzLm9uKCdjb25uZWN0aW9uJywgZnVuY3Rpb24gY29ubmVjdGlvbih3cykge1xuICBjbGllbnRzLnB1c2god3MpO1xuXG4gIHdzLm9uKCdtZXNzYWdlJywgZnVuY3Rpb24gaW5jb21pbmcobWVzc2FnZSkge1xuICAgIGNvbnNvbGUubG9nKCdyZWNlaXZlZDogJXMnLCBtZXNzYWdlLCB3cyk7XG4gICAgYnJvYWRjYXN0KG1lc3NhZ2UsIHdzKTtcbiAgfSk7XG59KTtcbiJdfQ==