'use strict';

var WebSocketServer = require('ws').Server,
    wss = new WebSocketServer({ port: 8990 });

var clients = [];

function broadcast(data, from) {
  clients.filter(function (client) {
    return client !== from;
  }).forEach(function (client) {
    return client.send(data);
  });
};

wss.on('connection', function connection(ws) {
  clients.push(ws);

  ws.on('message', function incoming(message) {
    console.log('received: %s', message);
    broadcast(message, ws);
  });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zZXJ2ZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLGtCQUFrQixRQUFRLElBQVIsRUFBYyxNQUFwQztJQUNJLE1BQU0sSUFBSSxlQUFKLENBQW9CLEVBQUUsTUFBTSxJQUFSLEVBQXBCLENBRFY7O0FBR0EsSUFBSSxVQUFVLEVBQWQ7O0FBRUEsU0FBUyxTQUFULENBQW1CLElBQW5CLEVBQXlCLElBQXpCLEVBQThCO0FBQzVCLFVBQ0csTUFESCxDQUNVO0FBQUEsV0FBVSxXQUFXLElBQXJCO0FBQUEsR0FEVixFQUVHLE9BRkgsQ0FFVztBQUFBLFdBQVUsT0FBTyxJQUFQLENBQVksSUFBWixDQUFWO0FBQUEsR0FGWDtBQUdEOztBQUVELElBQUksRUFBSixDQUFPLFlBQVAsRUFBcUIsU0FBUyxVQUFULENBQW9CLEVBQXBCLEVBQXdCO0FBQzNDLFVBQVEsSUFBUixDQUFhLEVBQWI7O0FBRUEsS0FBRyxFQUFILENBQU0sU0FBTixFQUFpQixTQUFTLFFBQVQsQ0FBa0IsT0FBbEIsRUFBMkI7QUFDMUMsWUFBUSxHQUFSLENBQVksY0FBWixFQUE0QixPQUE1QjtBQUNBLGNBQVUsT0FBVixFQUFtQixFQUFuQjtBQUNELEdBSEQ7QUFJRCxDQVBEIiwiZmlsZSI6InNlcnZlci5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBXZWJTb2NrZXRTZXJ2ZXIgPSByZXF1aXJlKCd3cycpLlNlcnZlclxuICAsIHdzcyA9IG5ldyBXZWJTb2NrZXRTZXJ2ZXIoeyBwb3J0OiA4OTkwIH0pO1xuXG52YXIgY2xpZW50cyA9IFtdO1xuXG5mdW5jdGlvbiBicm9hZGNhc3QoZGF0YSwgZnJvbSl7XG4gIGNsaWVudHNcbiAgICAuZmlsdGVyKGNsaWVudCA9PiBjbGllbnQgIT09IGZyb20pXG4gICAgLmZvckVhY2goY2xpZW50ID0+IGNsaWVudC5zZW5kKGRhdGEpKTtcbn07XG5cbndzcy5vbignY29ubmVjdGlvbicsIGZ1bmN0aW9uIGNvbm5lY3Rpb24od3MpIHtcbiAgY2xpZW50cy5wdXNoKHdzKTtcblxuICB3cy5vbignbWVzc2FnZScsIGZ1bmN0aW9uIGluY29taW5nKG1lc3NhZ2UpIHtcbiAgICBjb25zb2xlLmxvZygncmVjZWl2ZWQ6ICVzJywgbWVzc2FnZSk7XG4gICAgYnJvYWRjYXN0KG1lc3NhZ2UsIHdzKTtcbiAgfSk7XG59KTtcbiJdfQ==