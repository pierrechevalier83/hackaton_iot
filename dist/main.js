"use strict";

/*jslint node:true, vars:true, bitwise:true, unparam:true */
/*jshint unused:true */
/*global */
/*
 * Author: Zion Orent <zorent@ics.com>
 * Copyright (c) 2014 Intel Corporation.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

var sensorModule = require('jsupm_ttp223');
var buzzerModule = require("jsupm_buzzer");
var groveSensor = require("jsupm_grove");

var SENSORS = require('./sensors');

var socket = require('./socket').init();

var touch = new sensorModule.TTP223(SENSORS.touch);
var buzzer = new buzzerModule.Buzzer(SENSORS.buzzer);
var redLed = new groveSensor.GroveLed(SENSORS.leds.red);

function doStuff() {
  buzzer.playSound(buzzerModule.DO, 10000);
  redLed.on();
  setTimeout(function () {
    return redLed.off();
  }, 500);
}

function readSensorValue() {
  if (touch.isPressed()) {
    console.log(touch.name() + " is pressed");
    socket.send({ event: 'on' });
  }
}

socket.onMessage(function (data) {
  return console.log(data);
});

setInterval(readSensorValue, 100);

// Print message when exiting
process.on('SIGINT', function () {
  console.log("Exiting...");
  process.exit(0);
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL21haW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUEyQkEsSUFBSSxlQUFlLFFBQVEsY0FBUixDQUFuQjtBQUNBLElBQUksZUFBZSxRQUFRLGNBQVIsQ0FBbkI7QUFDQSxJQUFJLGNBQWMsUUFBUSxhQUFSLENBQWxCOztBQUVBLElBQU0sVUFBVSxRQUFRLFdBQVIsQ0FBaEI7O0FBRUEsSUFBSSxTQUFTLFFBQVEsVUFBUixFQUFvQixJQUFwQixFQUFiOztBQUVBLElBQUksUUFBUSxJQUFJLGFBQWEsTUFBakIsQ0FBd0IsUUFBUSxLQUFoQyxDQUFaO0FBQ0EsSUFBSSxTQUFTLElBQUksYUFBYSxNQUFqQixDQUF3QixRQUFRLE1BQWhDLENBQWI7QUFDQSxJQUFJLFNBQVMsSUFBSSxZQUFZLFFBQWhCLENBQXlCLFFBQVEsSUFBUixDQUFhLEdBQXRDLENBQWI7O0FBRUEsU0FBUyxPQUFULEdBQWtCO0FBQ2hCLFNBQU8sU0FBUCxDQUFpQixhQUFhLEVBQTlCLEVBQWtDLEtBQWxDO0FBQ0EsU0FBTyxFQUFQO0FBQ0EsYUFBVztBQUFBLFdBQU0sT0FBTyxHQUFQLEVBQU47QUFBQSxHQUFYLEVBQStCLEdBQS9CO0FBQ0Q7O0FBRUQsU0FBUyxlQUFULEdBQTJCO0FBQ3pCLE1BQUssTUFBTSxTQUFOLEVBQUwsRUFBeUI7QUFDdkIsWUFBUSxHQUFSLENBQVksTUFBTSxJQUFOLEtBQWUsYUFBM0I7QUFDQSxXQUFPLElBQVAsQ0FBWSxFQUFDLE9BQU8sSUFBUixFQUFaO0FBQ0Q7QUFDRjs7QUFFRCxPQUFPLFNBQVAsQ0FBaUIsVUFBQyxJQUFEO0FBQUEsU0FBVSxRQUFRLEdBQVIsQ0FBWSxJQUFaLENBQVY7QUFBQSxDQUFqQjs7QUFFQSxZQUFZLGVBQVosRUFBNkIsR0FBN0I7OztBQUdBLFFBQVEsRUFBUixDQUFXLFFBQVgsRUFBcUIsWUFDckI7QUFDQyxVQUFRLEdBQVIsQ0FBWSxZQUFaO0FBQ0EsVUFBUSxJQUFSLENBQWEsQ0FBYjtBQUNBLENBSkQiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qanNsaW50IG5vZGU6dHJ1ZSwgdmFyczp0cnVlLCBiaXR3aXNlOnRydWUsIHVucGFyYW06dHJ1ZSAqL1xuLypqc2hpbnQgdW51c2VkOnRydWUgKi9cbi8qZ2xvYmFsICovXG4vKlxuICogQXV0aG9yOiBaaW9uIE9yZW50IDx6b3JlbnRAaWNzLmNvbT5cbiAqIENvcHlyaWdodCAoYykgMjAxNCBJbnRlbCBDb3Jwb3JhdGlvbi5cbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmdcbiAqIGEgY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuICogXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4gKiB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4gKiBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cbiAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0b1xuICogdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXG4gKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxuICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4gKiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORFxuICogTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRVxuICogTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTlxuICogT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OXG4gKiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuXG52YXIgc2Vuc29yTW9kdWxlID0gcmVxdWlyZSgnanN1cG1fdHRwMjIzJyk7XG52YXIgYnV6emVyTW9kdWxlID0gcmVxdWlyZShcImpzdXBtX2J1enplclwiKTtcbnZhciBncm92ZVNlbnNvciA9IHJlcXVpcmUoXCJqc3VwbV9ncm92ZVwiKTtcblxuY29uc3QgU0VOU09SUyA9IHJlcXVpcmUoJy4vc2Vuc29ycycpO1xuXG52YXIgc29ja2V0ID0gcmVxdWlyZSgnLi9zb2NrZXQnKS5pbml0KCk7XG5cbnZhciB0b3VjaCA9IG5ldyBzZW5zb3JNb2R1bGUuVFRQMjIzKFNFTlNPUlMudG91Y2gpO1xudmFyIGJ1enplciA9IG5ldyBidXp6ZXJNb2R1bGUuQnV6emVyKFNFTlNPUlMuYnV6emVyKTtcbnZhciByZWRMZWQgPSBuZXcgZ3JvdmVTZW5zb3IuR3JvdmVMZWQoU0VOU09SUy5sZWRzLnJlZCk7XG5cbmZ1bmN0aW9uIGRvU3R1ZmYoKXtcbiAgYnV6emVyLnBsYXlTb3VuZChidXp6ZXJNb2R1bGUuRE8sIDEwMDAwKVxuICByZWRMZWQub24oKTtcbiAgc2V0VGltZW91dCgoKSA9PiByZWRMZWQub2ZmKCksIDUwMCk7XG59XG5cbmZ1bmN0aW9uIHJlYWRTZW5zb3JWYWx1ZSgpIHtcbiAgaWYgKCB0b3VjaC5pc1ByZXNzZWQoKSApIHtcbiAgICBjb25zb2xlLmxvZyh0b3VjaC5uYW1lKCkgKyBcIiBpcyBwcmVzc2VkXCIpO1xuICAgIHNvY2tldC5zZW5kKHtldmVudDogJ29uJ30pO1xuICB9XG59XG5cbnNvY2tldC5vbk1lc3NhZ2UoKGRhdGEpID0+IGNvbnNvbGUubG9nKGRhdGEpKTtcblxuc2V0SW50ZXJ2YWwocmVhZFNlbnNvclZhbHVlLCAxMDApO1xuXG4vLyBQcmludCBtZXNzYWdlIHdoZW4gZXhpdGluZ1xucHJvY2Vzcy5vbignU0lHSU5UJywgZnVuY3Rpb24oKVxue1xuXHRjb25zb2xlLmxvZyhcIkV4aXRpbmcuLi5cIik7XG5cdHByb2Nlc3MuZXhpdCgwKTtcbn0pO1xuIl19